(function(){"use strict";var t={7841:function(t,e,s){var i=s(6768),n=s(5130),o=s(4232);const a={class:"container"},r={class:"input-field"},l={class:"input-field"},d={class:"input-field"};function u(t,e,s,u,c,p){return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("h3",null," Change password for "+(0,o.v_)(c.user),1),(0,i.Lk)("div",r,[(0,i.bo)((0,i.Lk)("input",{id:"old",type:"password",onKeyup:e[0]||(e[0]=(0,n.jR)(((...t)=>p.submit&&p.submit(...t)),["enter"])),"onUpdate:modelValue":e[1]||(e[1]=t=>c.old=t),class:"orange-text"},null,544),[[n.Jo,c.old]]),e[7]||(e[7]=(0,i.Lk)("label",{for:"old"}," Old password ",-1))]),(0,i.Lk)("div",l,[(0,i.bo)((0,i.Lk)("input",{id:"new",type:"password",onKeyup:e[2]||(e[2]=(0,n.jR)(((...t)=>p.submit&&p.submit(...t)),["enter"])),"onUpdate:modelValue":e[3]||(e[3]=t=>c.np=t),class:(0,o.C4)(c.np==c.retype?"green-text":"red-text")},null,34),[[n.Jo,c.np]]),e[8]||(e[8]=(0,i.Lk)("label",{for:"new"}," New password ",-1))]),(0,i.Lk)("div",d,[(0,i.bo)((0,i.Lk)("input",{id:"retype",type:"password",onKeyup:e[4]||(e[4]=(0,n.jR)(((...t)=>p.submit&&p.submit(...t)),["enter"])),"onUpdate:modelValue":e[5]||(e[5]=t=>c.retype=t),class:(0,o.C4)(c.np==c.retype?"green-text":"red-text")},null,34),[[n.Jo,c.retype]]),e[9]||(e[9]=(0,i.Lk)("label",{for:"retype"}," Retype new password ",-1))]),(0,i.Lk)("button",{class:"waves-effect red rounded btn-large",onClick:e[6]||(e[6]=(...t)=>p.submit&&p.submit(...t))},e[10]||(e[10]=[(0,i.Lk)("i",{class:"material-icons"},"arrow_forward",-1),(0,i.eW)(" Change password")]))])}var c=s(6587),p=s.n(c),h=s(5741),f=s.n(h),m={name:"App",data(){return{id:null,user:null,old:"",np:"",retype:""}},mounted(){f().AutoInit(),this.id=localStorage.getItem("id"),void 0!=this.id&&$.post("//api.citrc.tw/wbox/whoami",{id:this.id},(t=>{t=JSON.parse(t),t["ok"]?this.user=t["data"]:(this.id=void 0,localStorage.removeItem("id"),location.href="/")}))},methods:{submit(){if(""!=this.np&&""!=this.old&&""!=this.retype){if(this.np!=this.retype)return f().toast({html:"Passwords doesn't match",classes:"red rounded"});f().toast({html:"Changing password...",classes:"orange rounded"}),$.post("https://api.citrc.tw/wbox/chgpswd",{password:this.old,npswd:this.np,username:this.user,id:this.id},(t=>{t=JSON.parse(t),t["ok"]?(f().toast({html:"Password Changed.",classes:"green rounded"}),this.old=this.np=this.retype=""):f().toast({html:t["error"],classes:"rounded red"})}))}else f().toast({html:"Field empty",classes:"red rounded"})}}},v=s(1241);const g=(0,v.A)(m,[["render",u]]);var b=g;function w(t,e,s,n,o,a){return e[0]||(e[0]=(0,i.Fv)('<nav><div class="nav-wrapper grey"><ul><a><i class="material-icons sidenav-trigger" data-target="slide-out"> menu </i></a><a href="/" class="brand-logo"><i class="material-icons hide-on-med-and-down" style="padding-left:10px;">cloud</i> ysh&#39;s toolbox</a></ul><ul id="nav-mobile" class="right hide-on-med-and-down"><li><a href="tainan_bus.html">Bus in <b class="orange-text">Tainan</b></a></li><li><a href="ncku_bus.html">Bus in <b class="red-text">NCKU</b></a></li></ul></div></nav><ul id="slide-out" class="sidenav"><h5 style="padding-left:25px;"> ysh&#39;s toolbox </h5><li><div class="divider"></div></li><li><a class="subheader">Bus</a></li><li><a class="waves-effect" href="tainan_bus.html">Bus in <b class="orange-text">Tainan</b></a></li><li><a class="waves-effect" href="ncku_bus.html">Bus in <b class="red-text">NCKU</b></a></li></ul>',2))}var y={name:"nav",data(){return{id:0,user:void 0}},mounted(){f().AutoInit(),this.id=localStorage.getItem("id"),this.id||localStorage.setItem("id","test"),$.post("//api.citrc.tw/wbox/whoami",{id:this.id},(t=>{t=JSON.parse(t),t["ok"]?this.user=t["data"]:(localStorage.removeItem("id"),this.id=void 0),-1!=location.href.indexOf("?login")&&f().toast({html:"<i class='material-icons' style='padding-right: 10px;'> check_circle </i> Hello, "+this.user,classes:"green rounded"})})),-1!=location.href.indexOf("?logout")&&f().toast({html:"<i class='material-icons' style='padding-right: 10px;'> exit_to_app </i> Logged out successfully",classes:"cyan rounded"})},methods:{logout(){$.post("//api.citrc.tw/wbox/logout",{id:this.id},(t=>{localStorage.removeItem("id"),location.href="/?logout"}))},upload(){void 0==this.user?f().toast({html:"<i class='material-icons' style='padding-right: 10px'> block </i> You haven't login",classes:"rounded cyan"}):location.href="upload.html"}}};const x=(0,v.A)(y,[["render",w]]);var k=x;s(8055);(0,i.bF)("script",{src:"https://code.jquery.com/jquery-3.7.1.min.js",integrity:"sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=",crossorigin:"anonymous"},null),Object.assign(window,{$:p(),jQuery:p()}),(0,n.Ef)(b).mount("#app"),(0,n.Ef)(k).mount("#nav")}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,s),o.exports}s.m=t,function(){var t=[];s.O=function(e,i,n,o){if(!i){var a=1/0;for(u=0;u<t.length;u++){i=t[u][0],n=t[u][1],o=t[u][2];for(var r=!0,l=0;l<i.length;l++)(!1&o||a>=o)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(r=!1,o<a&&(a=o));if(r){t.splice(u--,1);var d=n();void 0!==d&&(e=d)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[i,n,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={806:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,o,a=i[0],r=i[1],l=i[2],d=0;if(a.some((function(e){return 0!==t[e]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(l)var u=l(s)}for(e&&e(i);d<a.length;d++)o=a[d],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(u)},i=self["webpackChunkvue"]=self["webpackChunkvue"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(7841)}));i=s.O(i)})();
//# sourceMappingURL=user.f3aaf982.js.map