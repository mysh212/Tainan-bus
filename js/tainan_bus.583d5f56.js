(function(){"use strict";var t={4222:function(t,e,s){var i=s(6768),a=s(5130),n=s(4232);const o={class:"container"},l={class:"row"},r={class:"col s4"},c={class:"card white"},u={class:"col s4"},d={class:"card cyan"},h={class:"card-content white-text"},v={class:"col s4"},f={id:"buses"},p=["onClick"],m={class:"card-content"},b={class:"right"},g={class:"chip"},k={class:"chip"},w={id:"routes"},y=["onClick"],_={class:"card-content"},L={key:0,class:"right"},x={key:1,class:"right"};function C(t,e,s,a,C,I){return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",o,[(0,i.Lk)("div",l,[(0,i.Lk)("div",r,[(0,i.Lk)("div",c,[(0,i.Lk)("div",{class:(0,n.C4)(["card-content",""==this.app?"green":""]),onClick:e[0]||(e[0]=t=>{this.app="",I.check(this.bus_number)})},[e[2]||(e[2]=(0,i.Lk)("b",null," From ",-1)),(0,i.Lk)("h3",null,(0,n.v_)(C.bus?.Go),1)],2)])]),(0,i.Lk)("div",u,[(0,i.Lk)("div",d,[(0,i.Lk)("div",h,[e[3]||(e[3]=(0,i.Lk)("b",null," Route ",-1)),(0,i.Lk)("h3",null,(0,n.v_)(C.bus?.name),1)])])]),(0,i.Lk)("div",v,[(0,i.Lk)("div",{class:"card white",onClick:e[1]||(e[1]=t=>{this.app="&goback=1",I.check(this.bus_number)})},[(0,i.Lk)("div",{class:(0,n.C4)(["card-content",""!=this.app?"green":""])},[e[4]||(e[4]=(0,i.Lk)("b",null," To ",-1)),(0,i.Lk)("h3",null,(0,n.v_)(C.bus?.Back),1)],2)])])]),e[5]||(e[5]=(0,i.Lk)("a",{class:"btn-large waves-effect cyan",href:"#buses"}," Bus ",-1)),e[6]||(e[6]=(0,i.Lk)("a",{class:"btn-large waves-effect cyan",href:"#routes"}," Route ",-1)),(0,i.Lk)("div",f,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.bus?.data,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t},[(0,i.Lk)("div",{class:"card",onClick:e=>I.get_stop(t?.name)},[(0,i.Lk)("div",m,[(0,i.Lk)("b",null,(0,n.v_)(t?.name),1),(0,i.Lk)("b",b,(0,n.v_)(t?.stopStatus),1),(0,i.Lk)("div",g,(0,n.v_)(t?.lat),1),(0,i.Lk)("div",k,(0,n.v_)(t?.lon),1)])],8,p)])))),128))]),(0,i.Lk)("div",w,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.route,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t},[(0,i.Lk)("div",{class:"card yellow light-1",onClick:e=>I.check(t?.id)},[(0,i.Lk)("div",_,[(0,i.Lk)("b",null,(0,n.v_)(t?.name),1),t?.time?((0,i.uX)(),(0,i.CE)("b",L,(0,n.v_)(t?.time)+" "+(0,n.v_)(I.isint(t?.time)?"分鐘":""),1)):((0,i.uX)(),(0,i.CE)("b",x,(0,n.v_)(t?.id),1))])],8,y)])))),128))])]),e[7]||(e[7]=(0,i.Fv)('<div id="modal1" class="modal"><div class="modal-content"><h4>Modal Header</h4><p>A bunch of text</p></div><div class="modal-footer"><a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a></div></div><div class="fixed-action-btn"><a class="btn-floating btn-large red"><i class="large material-icons">mode_edit</i></a><ul><li><a class="btn-floating blue" href="#buses"><i class="material-icons">directions_bus</i></a></li><li><a class="btn-floating green" href="#routes"><i class="material-icons">timeline</i></a></li></ul></div>',2)),(0,i.eW)(" "+(0,n.v_)(C.test),1)],64)}s(4114);var I=s(6587),O=s.n(I),j=s(5741),B=s.n(j),A={name:"App",data(){return{test:"",bus_number:"",bus:null,route:null,app:""}},mounted(){location.href="/",B().AutoInit(),$.get("https://2384.tainan.gov.tw/NewTNBusAPI_V2/API/PathListV2.ashx",(t=>{this.route=t}))},methods:{check(t){location.href="#buses",this.bus_number=t;var e="https://2384.tainan.gov.tw/IMP/jsp/rwd_api/ajax_routeinfo.jsp?id="+t+"&lang=cht"+this.app;$.get(e,(t=>{this.test=t,t["result"]?B().toast({html:"Bus status updated.",classes:"rounded green"}):B().toast({html:JSON.stringify(t),classes:"rounded red"}),this.bus=t}))},get_stop(t){location.href="#routes";var e="https://2384.tainan.gov.tw/NewTNBusAPI_V2/API/CrossRoutesV2.ashx";$.post(e,{stopnamecht:t},(t=>{for(var e of(B().toast({html:JSON.stringify(t)}),this.route=[],t[0]["info"]))this.route.push({name:e.RouteName,id:e.RouteID,time:e.Time});this.route.sort(((t,e)=>"即將進站"==t?.time?0:"即將進站"==e?.time?1:this.isint(e?.time)?this.isint(t?.time)?parseInt(t?.time)>parseInt(e?.time):1:0))}))},isint(t){return/^\d+$/.test(t)}}},E=s(1241);const F=(0,E.A)(A,[["render",C]]);var N=F;function P(t,e,s,a,n,o){return e[0]||(e[0]=(0,i.Fv)('<nav><div class="nav-wrapper grey"><ul><a><i class="material-icons sidenav-trigger" data-target="slide-out"> menu </i></a><a href="/" class="brand-logo"><i class="material-icons hide-on-med-and-down" style="padding-left:10px;">cloud</i> ysh&#39;s toolbox</a></ul><ul id="nav-mobile" class="right hide-on-med-and-down"><li><a href="tainan_bus.html">Bus in <b class="orange-text">Tainan</b></a></li><li><a href="ncku_bus.html">Bus in <b class="red-text">NCKU</b></a></li></ul></div></nav><ul id="slide-out" class="sidenav"><h5 style="padding-left:25px;"> ysh&#39;s toolbox </h5><li><div class="divider"></div></li><li><a class="subheader">Bus</a></li><li><a class="waves-effect" href="tainan_bus.html">Bus in <b class="orange-text">Tainan</b></a></li><li><a class="waves-effect" href="ncku_bus.html">Bus in <b class="red-text">NCKU</b></a></li></ul>',2))}var T={name:"nav",data(){return{id:0,user:void 0}},mounted(){B().AutoInit(),this.id=localStorage.getItem("id"),this.id||localStorage.setItem("id","test"),$.post("//api.citrc.tw/wbox/whoami",{id:this.id},(t=>{t=JSON.parse(t),t["ok"]?this.user=t["data"]:(localStorage.removeItem("id"),this.id=void 0),-1!=location.href.indexOf("?login")&&B().toast({html:"<i class='material-icons' style='padding-right: 10px;'> check_circle </i> Hello, "+this.user,classes:"green rounded"})})),-1!=location.href.indexOf("?logout")&&B().toast({html:"<i class='material-icons' style='padding-right: 10px;'> exit_to_app </i> Logged out successfully",classes:"cyan rounded"})},methods:{logout(){$.post("//api.citrc.tw/wbox/logout",{id:this.id},(t=>{localStorage.removeItem("id"),location.href="/?logout"}))},upload(){void 0==this.user?B().toast({html:"<i class='material-icons' style='padding-right: 10px'> block </i> You haven't login",classes:"rounded cyan"}):location.href="upload.html"}}};const S=(0,E.A)(T,[["render",P]]);var X=S;s(8055);(0,i.bF)("script",{src:"https://code.jquery.com/jquery-3.7.1.min.js",integrity:"sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=",crossorigin:"anonymous"},null),Object.assign(window,{$:O(),jQuery:O()}),(0,a.Ef)(N).mount("#app"),(0,a.Ef)(X).mount("#nav")}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,n){if(!i){var o=1/0;for(u=0;u<t.length;u++){i=t[u][0],a=t[u][1],n=t[u][2];for(var l=!0,r=0;r<i.length;r++)(!1&n||o>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[r])}))?i.splice(r--,1):(l=!1,n<o&&(o=n));if(l){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[i,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={421:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,n,o=i[0],l=i[1],r=i[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(r)var u=r(s)}for(e&&e(i);c<o.length;c++)n=o[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},i=self["webpackChunkvue"]=self["webpackChunkvue"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(4222)}));i=s.O(i)})();
//# sourceMappingURL=tainan_bus.583d5f56.js.map