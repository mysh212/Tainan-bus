(function(){"use strict";var t={8922:function(t,e,i){var s=i(6768),o=i(5130),a=i(4232);const n={key:0,class:"progress"},r={class:"container"},l={id:"routes",class:"hide-on-med-and-down"},c=["onClick"],u={class:"card-content"},d={class:"chip"},h={class:"chip"},v={key:0,class:"chip red"},f={key:1,class:"right"},p={class:"right chip"},g={class:"right chip"},m={id:"routes",class:"hide-on-large-only"},b=["onClick"],k={class:"card-content"},_={class:"chip right"},y={class:"chip right"},w={key:0,class:"chip red right"},x={class:"card-content"},L={key:0,class:"right"},C={class:"chip"},I={class:"chip"};function O(t,e,i,o,O,E){return(0,s.uX)(),(0,s.CE)(s.FK,null,[O.loading?((0,s.uX)(),(0,s.CE)("div",n,e[2]||(e[2]=[(0,s.Lk)("div",{class:"indeterminate"},null,-1)]))):(0,s.Q3)("",!0),e[4]||(e[4]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("div",r,[(0,s.Lk)("a",{class:"btn-large red lighten-3 waves-effect",onClick:e[0]||(e[0]=t=>E.check(!1))}," To Station "),(0,s.Lk)("a",{class:"btn-large purple lighten-3 waves-effect",onClick:e[1]||(e[1]=t=>E.check(!0))}," To Dorm "),(0,s.Lk)("div",l,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(O.route,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.Lk)("div",{class:"card yellow lighten-5 waves-block waves-effect waves-ripple",onClick:e=>E.check(t?.id)},[(0,s.Lk)("div",u,[(0,s.Lk)("b",null,(0,a.v_)(t?.name),1),(0,s.Lk)("div",d,(0,a.v_)(t?.from),1),(0,s.Lk)("div",h,(0,a.v_)(t?.to),1),1==t?.rev?((0,s.uX)(),(0,s.CE)("div",v," 逆行 ")):(0,s.Q3)("",!0),t?.time?((0,s.uX)(),(0,s.CE)("b",f,(0,a.v_)(t?.time)+" "+(0,a.v_)(E.isint(t?.time)?"分鐘":""),1)):(0,s.Q3)("",!0),(0,s.Lk)("b",p,(0,a.v_)(t?.id),1),(0,s.Lk)("b",g,(0,a.v_)(t?.stop),1)])],8,c)])))),128))]),(0,s.Lk)("div",m,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(O.route,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.Lk)("div",{class:"card yellow lighten-5 waves-block waves-effect waves-ripple",onClick:e=>E.check(t?.id)},[(0,s.Lk)("div",k,[(0,s.Lk)("b",null,(0,a.v_)(t?.name),1),(0,s.Lk)("div",_,(0,a.v_)(t?.from),1),(0,s.Lk)("div",y,(0,a.v_)(t?.to),1),1==t?.rev?((0,s.uX)(),(0,s.CE)("div",w," 逆行 ")):(0,s.Q3)("",!0)]),e[3]||(e[3]=(0,s.Lk)("div",{class:"divider"},null,-1)),(0,s.Lk)("div",x,[t?.time?((0,s.uX)(),(0,s.CE)("b",L,(0,a.v_)(t?.time)+" "+(0,a.v_)(E.isint(t?.time)?"分鐘":""),1)):(0,s.Q3)("",!0),(0,s.Lk)("b",C,(0,a.v_)(t?.id),1),(0,s.Lk)("b",I,(0,a.v_)(t?.stop),1)])],8,b)])))),128))])]),e[5]||(e[5]=(0,s.Fv)('<div class="fixed-action-btn"><a class="btn-floating btn-large red"><i class="large material-icons">mode_edit</i></a><ul><li><a class="btn-floating blue" href="#buses"><i class="material-icons">directions_bus</i></a></li><li><a class="btn-floating green" href="#routes"><i class="material-icons">timeline</i></a></li></ul></div>',1)),(0,s.eW)(" "+(0,a.v_)(O.test),1)],64)}i(4114),i(7642),i(8004),i(3853),i(5876),i(2475),i(5024),i(1698);var E=i(6587),j=i.n(E),B=i(5741),F=i.n(B),S={name:"App",data(){return{test:"",bus_number:"",bus:null,route:null,route_history:new Set,app:"",to:JSON.parse('{"10450":"0","10451":"1","1070":"0","1077":"1","1117":"1","1412":"0","1602":"1","2902":"0","10019":"1","10162":"0"}'),rev:!1,loading:!1}},mounted(){F().AutoInit()},methods:{check(t){this.loading=!0,this.route_history=new Set,this.route=[],t?(this.get_stop("台南火車站(南站)",1),this.get_stop("台南火車站(北站)",1),this.get_stop("香格里拉飯店",1)):(this.get_stop("成大醫院(小東路)"),this.get_stop("長榮小東路口"),this.get_stop("東興里"))},get_stop(t,e=0,i=""){this.loading=!0,location.href="#routes";var s="https://2384.tainan.gov.tw/NewTNBusAPI_V2/API/CrossRoutesV2.ashx";$.post(s,{stopnamecht:t},(i=>{for(var s of(this.route||(this.route=[]),i))for(var o of s["info"])this.route_history.has(o?.RouteName)||void 0!=this.to[o?.RouteID]&&(this.to[o?.RouteID]!=o.GoBack^1==e||(this.route.push({name:o?.RouteName,id:o?.RouteID,time:o?.Time,from:o?.Dept,to:o?.Dest,rev:o?.GoBack,stop:t}),this.route_history.add(o?.RouteName)));this.route.sort(),this.route.sort(((t,e)=>{var i=t?.time,s=e?.time;return"即將進站"==t?.time?i="-10000":this.isint(t?.time)||(i="10000"),"即將進站"==e?.time?s="-10000":this.isint(e?.time)||(s="10000"),parseInt(i)-parseInt(s)})),this.loading=!1}))},isint(t){return/^\d+$/.test(t)}}},T=i(1241);const X=(0,T.A)(S,[["render",O]]);var N=X;function R(t,e,i,o,a,n){return e[0]||(e[0]=(0,s.Fv)('<nav><div class="nav-wrapper grey"><ul><a><i class="material-icons sidenav-trigger" data-target="slide-out"> menu </i></a><a href="/" class="brand-logo"><i class="material-icons hide-on-med-and-down" style="padding-left:10px;">cloud</i> ysh&#39;s toolbox</a></ul><ul id="nav-mobile" class="right hide-on-med-and-down"><li><a href="tainan_bus.html">Bus in <b class="orange-text">Tainan</b></a></li><li><a href="ncku_bus.html">Bus in <b class="red-text">NCKU</b></a></li></ul></div></nav><ul id="slide-out" class="sidenav"><h5 style="padding-left:25px;"> ysh&#39;s toolbox </h5><li><div class="divider"></div></li><li><a class="subheader">Bus</a></li><li><a class="waves-effect" href="tainan_bus.html">Bus in <b class="orange-text">Tainan</b></a></li><li><a class="waves-effect" href="ncku_bus.html">Bus in <b class="red-text">NCKU</b></a></li></ul>',2))}var A={name:"nav",data(){return{id:0,user:void 0}},mounted(){F().AutoInit(),this.id=localStorage.getItem("id"),this.id||localStorage.setItem("id","test"),$.post("//api.citrc.tw/wbox/whoami",{id:this.id},(t=>{t=JSON.parse(t),t["ok"]?this.user=t["data"]:(localStorage.removeItem("id"),this.id=void 0),-1!=location.href.indexOf("?login")&&F().toast({html:"<i class='material-icons' style='padding-right: 10px;'> check_circle </i> Hello, "+this.user,classes:"green rounded"})})),-1!=location.href.indexOf("?logout")&&F().toast({html:"<i class='material-icons' style='padding-right: 10px;'> exit_to_app </i> Logged out successfully",classes:"cyan rounded"})},methods:{logout(){$.post("//api.citrc.tw/wbox/logout",{id:this.id},(t=>{localStorage.removeItem("id"),location.href="/?logout"}))},upload(){void 0==this.user?F().toast({html:"<i class='material-icons' style='padding-right: 10px'> block </i> You haven't login",classes:"rounded cyan"}):location.href="upload.html"}}};const Q=(0,T.A)(A,[["render",R]]);var D=Q;i(8055);(0,s.bF)("script",{src:"https://code.jquery.com/jquery-3.7.1.min.js",integrity:"sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=",crossorigin:"anonymous"},null),Object.assign(window,{$:j(),jQuery:j()}),(0,o.Ef)(N).mount("#app"),(0,o.Ef)(D).mount("#nav")}},e={};function i(s){var o=e[s];if(void 0!==o)return o.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,s,o,a){if(!s){var n=1/0;for(u=0;u<t.length;u++){s=t[u][0],o=t[u][1],a=t[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&a||n>=a)&&Object.keys(i.O).every((function(t){return i.O[t](s[l])}))?s.splice(l--,1):(r=!1,a<n&&(n=a));if(r){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[s,o,a]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={801:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,a,n=s[0],r=s[1],l=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(l)var u=l(i)}for(e&&e(s);c<n.length;c++)a=n[c],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(u)},s=self["webpackChunkvue"]=self["webpackChunkvue"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],(function(){return i(8922)}));s=i.O(s)})();
//# sourceMappingURL=ncku_bus.032f494e.js.map